(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{671:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var slicedToArray=__webpack_require__(13),slicedToArray_default=__webpack_require__.n(slicedToArray),helpers_extends=__webpack_require__(3),extends_default=__webpack_require__.n(helpers_extends),objectSpread=__webpack_require__(18),objectSpread_default=__webpack_require__.n(objectSpread),objectWithoutProperties=__webpack_require__(9),objectWithoutProperties_default=__webpack_require__.n(objectWithoutProperties),classCallCheck=__webpack_require__(5),classCallCheck_default=__webpack_require__.n(classCallCheck),createClass=__webpack_require__(4),createClass_default=__webpack_require__.n(createClass),possibleConstructorReturn=__webpack_require__(6),possibleConstructorReturn_default=__webpack_require__.n(possibleConstructorReturn),getPrototypeOf=__webpack_require__(7),getPrototypeOf_default=__webpack_require__.n(getPrototypeOf),assertThisInitialized=__webpack_require__(16),assertThisInitialized_default=__webpack_require__.n(assertThisInitialized),inherits=__webpack_require__(8),inherits_default=__webpack_require__.n(inherits),commonjs=__webpack_require__(635),react=__webpack_require__(1),react_default=__webpack_require__.n(react),react_select_esm=__webpack_require__(648),deep_equal=__webpack_require__(54),deep_equal_default=__webpack_require__.n(deep_equal),utils=__webpack_require__(10),choicesAdapter=__webpack_require__(74),index_esm=__webpack_require__(663),sum=function sum(a,b){return a+b},MenuList_OptionWrapper=function(_React$PureComponent){function OptionWrapper(){return classCallCheck_default()(this,OptionWrapper),possibleConstructorReturn_default()(this,getPrototypeOf_default()(OptionWrapper).apply(this,arguments))}return inherits_default()(OptionWrapper,_React$PureComponent),createClass_default()(OptionWrapper,[{key:"render",value:function render(){var _this$props=this.props,style=_this$props.style,index=_this$props.index,data=_this$props.data;return react_default.a.createElement("div",{style:style},data[index])}}]),OptionWrapper}(react_default.a.PureComponent);MenuList_OptionWrapper.displayName="OptionWrapper";var SelectMenuField_class,_class2,SelectMenuField_temp,utils_MenuList=function(){var _class,_temp,listDefaultHeight=arguments.length>0&&void 0!==arguments[0]?arguments[0]:19,listApproximatedLengthBreak=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return _temp=_class=function(_React$PureComponent2){function MenuList(props){var _this;return classCallCheck_default()(this,MenuList),(_this=possibleConstructorReturn_default()(this,getPrototypeOf_default()(MenuList).call(this,props))).itemSize=_this.itemSize.bind(assertThisInitialized_default()(_this)),_this.list=react_default.a.createRef(),_this.state={rawChildren:null,maxHeight:null,currentIndex:0},_this}return inherits_default()(MenuList,_React$PureComponent2),createClass_default()(MenuList,[{key:"componentDidMount",value:function componentDidMount(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function componentDidUpdate(){var currentIndex=this.state.currentIndex;this.list.current.scrollToItem(currentIndex)}},{key:"itemSize",value:function itemSize(index){return this.state.heights[index]}},{key:"render",value:function render(){var _this$props2=this.props,children=_this$props2.children,innerRef=_this$props2.innerRef,_this$state=this.state,height=_this$state.height,itemCount=_this$state.itemCount,estimatedItemSize=_this$state.estimatedItemSize;return react_default.a.createElement("div",{ref:innerRef},react_default.a.createElement(index_esm.a,{ref:this.list,height:height,itemCount:itemCount,itemSize:this.itemSize,estimatedItemSize:estimatedItemSize,itemData:Array.isArray(children)?children:[children]},MenuList_OptionWrapper))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(_ref,state){var rawChildren=_ref.children,maxHeight=_ref.maxHeight;if(rawChildren!==state.rawChildren||maxHeight!==state.maxHeight){var children=Array.isArray(rawChildren)?rawChildren:[rawChildren],heights=children.map(function(_ref2){var label=_ref2.props.label;return 16+listDefaultHeight*Math.ceil((label||"_").length/listApproximatedLengthBreak)}),totalHeight=heights.reduce(sum),height=Math.min(maxHeight,totalHeight),itemCount=children.length,currentIndex=Math.max(children.findIndex(function(_ref3){return _ref3.props.isFocused}),0);return{height:height,itemCount:itemCount,heights:heights,estimatedItemSize:Math.floor(totalHeight/itemCount),maxHeight:maxHeight,rawChildren:rawChildren,currentIndex:currentIndex}}return null}}]),MenuList}(react_default.a.PureComponent),_class.displayName="MenuList",_temp},memoizedChoices=__webpack_require__(75),multipleAdapter=__webpack_require__(117);__webpack_require__.d(__webpack_exports__,"DELIMITER",function(){return DELIMITER}),__webpack_require__.d(__webpack_exports__,"default",function(){return SelectMenuField_SelectMenuField});var DELIMITER="__/__",SelectMenuField_SelectMenuField=Object(multipleAdapter.a)(SelectMenuField_class=Object(choicesAdapter.a)(SelectMenuField_class=Object(memoizedChoices.a)(SelectMenuField_class=Object(utils.a)((SelectMenuField_temp=_class2=function(_React$PureComponent){function SelectMenuField(props){var _this;return classCallCheck_default()(this,SelectMenuField),(_this=possibleConstructorReturn_default()(this,getPrototypeOf_default()(SelectMenuField).call(this,props))).state={inputValue:null,search:null,filterOptions:null,options:[],value:null,_rawChoices:null,_rawValue:null},_this.handleChange=_this.handleChange.bind(assertThisInitialized_default()(_this)),_this.handleInputChange=_this.handleInputChange.bind(assertThisInitialized_default()(_this)),_this.filter=_this.filter.bind(assertThisInitialized_default()(_this)),_this.select=react_default.a.createRef(),_this.searchResults=null,_this}return inherits_default()(SelectMenuField,_React$PureComponent),createClass_default()(SelectMenuField,[{key:"handleChange",value:function handleChange(newValue){var _this$props=this.props,multiple=_this$props.multiple;return(0,_this$props.onChange)(newValue&&(multiple?newValue.map(function(_ref){return _ref.value}):newValue.value))}},{key:"handleInputChange",value:function handleInputChange(inputValue){var search=this.state.search;this.setState({inputValue:inputValue}),this.searchResults=inputValue?search.search(inputValue).map(function(_ref2){return _ref2.value}):null}},{key:"filter",value:function filter(_ref3){var value=_ref3.value;return!this.searchResults||this.searchResults.indexOf(value)>-1}},{key:"render",value:function render(b){var _this$props2=this.props,i18n=_this$props2.i18n,className=_this$props2.className,multiple=_this$props2.multiple,readOnly=_this$props2.readOnly,disabled=_this$props2.disabled,placeholder=_this$props2.placeholder,rawValue=_this$props2.value,elementRef=(_this$props2.choices,_this$props2.searchIndex,_this$props2.indexStrategy,_this$props2.sanitizer,_this$props2.tokenizer,_this$props2.indexes,_this$props2.windowThreshold,_this$props2.elementRef),onFocus=(_this$props2.onChange,_this$props2.onFocus),onBlur=_this$props2.onBlur,onKeyDown=_this$props2.onKeyDown,animated=_this$props2.animated,styles=_this$props2.styles,listApproximatedLengthBreak=_this$props2.listApproximatedLengthBreak,listDefaultHeight=_this$props2.listDefaultHeight,virtualizedThreshold=_this$props2.virtualizedThreshold,props=objectWithoutProperties_default()(_this$props2,["i18n","className","multiple","readOnly","disabled","placeholder","value","choices","searchIndex","indexStrategy","sanitizer","tokenizer","indexes","windowThreshold","elementRef","onChange","onFocus","onBlur","onKeyDown","animated","styles","listApproximatedLengthBreak","listDefaultHeight","virtualizedThreshold"]),_this$state=this.state,value=_this$state.value,options=_this$state.options,virtualized=options.length>virtualizedThreshold;return react_default.a.createElement("div",{className:b},react_default.a.createElement(react_select_esm.a,{className:b.e("select"),classNamePrefix:b.s,ref:this.select,isDisabled:disabled||readOnly,options:options,placeholder:placeholder||i18n.selectMenu.select,isMulti:multiple,value:value,components:objectSpread_default()({},!1===animated?{}:Object(react_select_esm.b)(),virtualized?{MenuList:utils_MenuList(listDefaultHeight,listApproximatedLengthBreak)}:{}),onChange:this.handleChange,onFocus:onFocus,onBlur:onBlur,onKeyDown:onKeyDown,onInputChange:this.handleInputChange,delimiter:DELIMITER,styles:styles,isClearable:!0,filterOption:this.filter,noOptionsMessage:i18n.selectMenu.noOptions,loadingMessage:i18n.selectMenu.loading}),react_default.a.createElement("input",extends_default()({className:b.mix(className).e("hidden-input"),ref:elementRef},props,{value:multiple?rawValue.join(DELIMITER):rawValue,onChange:utils.d,type:"text"})))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){var choices=nextProps.choices,searchIndex=nextProps.searchIndex,indexStrategy=nextProps.indexStrategy,sanitizer=nextProps.sanitizer,tokenizer=nextProps.tokenizer,current=nextProps.elementRef.current,indexes=nextProps.indexes,value=nextProps.value,multiple=nextProps.multiple,state=null;if(!deep_equal_default()(choices,prevState._rawChoices,{strict:!0})){var options=choices.map(function(_ref4){var _ref5=slicedToArray_default()(_ref4,2),label=_ref5[0];return{value:_ref5[1],label:label}}),search=new commonjs.Search("value");search.searchIndex=searchIndex||new commonjs.UnorderedSearchIndex,search.indexStrategy=indexStrategy||new commonjs.AllSubstringsIndexStrategy,sanitizer&&(search.sanitizer=sanitizer),tokenizer&&(search.tokenizer=tokenizer),indexes?indexes.forEach(function(index){search.addIndex(index)}):search.addIndex("label"),search.addDocuments(options),state={options:options,search:search,_rawChoices:choices}}if(!deep_equal_default()(value,prevState._rawValue,{strict:!0})){var opts=state?state.options:prevState.options;state=objectSpread_default()({},null===state?{}:state,{value:multiple?value.map(function(single){return opts.find(function(_ref6){return _ref6.value===single})}):opts.find(function(_ref7){return _ref7.value===value})||null,_rawValue:value}),current&&(current.value=value)}return state}}]),SelectMenuField}(react_default.a.PureComponent),_class2.displayName="SelectMenuField",_class2.defaultProps={virtualizedThreshold:100},SelectMenuField_class=SelectMenuField_temp))||SelectMenuField_class)||SelectMenuField_class)||SelectMenuField_class)||SelectMenuField_class}}]);
//# sourceMappingURL=SelectMenuField.d26e29e3381505e7c1ad.bundle.js.map